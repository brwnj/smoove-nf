manifest {
    mainScript = 'smoove.nf'
    version = '1.0.0'
}

process {
    time = '12h'
    memory = 8.GB
    cpus = 1
    withName: smoove_merge {
        memory = 15.GB
    }
    withName: smoove_square {
        cpus = 3
        memory = 45.GB
    }
    container = 'brentp/smoove:v0.2.2'
}

profiles {
    slurm {
        process {
            executor = 'slurm'
            queue = 'quinlan-shared-kp'
            scratch = '/scratch/local'
            clusterOptions = '--account=quinlan-kp --ntasks=1'
        }
        singularity {
            enabled = true
            cacheDir = '/scratch/ucgd/lustre/work/u6022494/imgs'
            runOptions = '--bind /scratch --bind /uufs'
        }
    }
    local {
        process {
            executor = 'local'
            scratch = '/scratch/local/u6022494'
        }
        singularity {
            enabled = true
            cacheDir = '/scratch/ucgd/lustre/work/u6022494/imgs'
            runOptions = '--bind /scratch --bind /uufs'
        }
    }
    batch {
        process {
            executor = 'awsbatch'
            queue = 'i3-nf'
            scratch = '/tmp'
        }
    }
}

aws.region = 'us-east-1'
executor.awscli = '/home/ec2-user/miniconda/bin/aws'
process.shell = ['/bin/bash', '-euo', 'pipefail']
